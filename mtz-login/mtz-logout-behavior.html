<link rel="import" href="../iron-ajax/iron-ajax.html">

<script>
  // Create an iron-ajax element to send logout POST request.
  const logoutAjax = document.createElement('iron-ajax');
  logoutAjax.setAttribute('method', 'POST');

  // Setup success handler.
  logoutAjax.addEventListener('response', event => {
    console.log('successfully logged out');
  });

  // Setup error handler.
  logoutAjax.addEventListener('error', event => {
    console.error('logout failed');
  });

  MtzLogoutBehavior = {
    logout() {
      // Send REST request to server to logout.
      logoutAjax.setAttribute('url', this.logoutUrl);
      const params = {username: sessionStorage.username};
      logoutAjax.setAttribute('params', JSON.stringify(params));
      logoutAjax.generateRequest();
      sessionStorage.clear();
    }
  };
</script>
