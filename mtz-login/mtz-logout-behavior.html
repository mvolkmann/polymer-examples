<script>
  // Create an iron-ajax element to send logout POST request.
  const ajax = document.createElement('iron-ajax');
  ajax.setAttribute('method', 'POST');

  // Setup success handler.
  ajax.addEventListener('response', event => {
    sessionStorage.clear();
    console.log('successfully logged out');
  });

  // Setup error handler.
  ajax.addEventListener('error', event => {
    console.error('logout failed');
  });

  MtzLogoutBehavior = {
    logout() {
      // Send REST request to server to logout.
      ajax.setAttribute('url', this.logoutUrl);
      const params = {username: sessionStorage.username};
      ajax.setAttribute('params', JSON.stringify(params));
      ajax.generateRequest();
    }
  };
</script>
