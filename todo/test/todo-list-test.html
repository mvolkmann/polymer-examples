<!DOCTYPE html>
<html>
  <head>
    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../web-component-tester/browser.js"></script>
    <link rel="import" href="../todo-list.html">
  </head>
  <body>
    <test-fixture id="my-fixture">
      <template>
        <todo-list></todo-list>
      </template>
    </test-fixture>
    <script>
      suite('<todo-list> suite 1', () => {
        let el;

        setup(() => {
          console.log('todo-list-test.html setup: entered');
          el = fixture('my-fixture');
        });

        test('initializes', () => {
          console.log('todo-list-test.html t1: el.todos =', el.todos);
          assert.equal(el.todos.length, 2);
          const [t1, t2] = el.todos;
          assert.equal(t1.text, 'learn Polymer');
          assert(t1.done);
          assert.equal(t2.text, 'build a Polymer app');
          assert(!t2.done);
        });

        test('can add a todo', () => {
          console.log('todo-list-test.html t2: el.todos =', el.todos);
          el.todoText = 'foo';
          el._addTodo();
          assert.equal(el.todos.length, 3);
          const [, , t3] = el.todos;
          assert.equal(t3.text, 'foo');
          assert(!t3.done);
        });
      });

      suite('<todo-list> suite 2', () => {
        let el;

        setup(() => {
          console.log('todo-list-test.html setup: entered');
          el = fixture('my-fixture');
        });

        test('can archive completed todos', () => {
          console.log('todo-list-test.html t3: el.todos =', el.todos);
          el._archiveCompleted();
          assert.equal(el.todos.length, 1);
          const [t1] = el.todos;
          assert.equal(t1.text, 'build a Polymer app');
        });

        /*
        test('can delete a todo', done => {
          console.log('todo-list-test.html t4: el.todos =', el.todos);
          assert.equal(el.todos.length, 2);
          const event = {detail: 1}; // id of "learn Polymer"
          el._deleteTodo(event);
          flush(() => {
            assert.equal(el.todos.length, 1);
            const [t2] = el.todos;
            assert.equal(t2.text, 'build a Polymer app');
            done();
          });
        });
        */
      });
    </script>
  </body>
</html>
